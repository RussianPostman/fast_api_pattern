# personalizator

Для тестового запуска необходимо:

1. Создать и заполнить файл с переменными окружения:
   API_TOKENS - токены заданные при старте, в последствии их можно добавить в БД.

```
POSTGRES_USER=root
POSTGRES_PASSWORD=ubnfhf
POSTGRES_HOST=postgres
POSTGRES_DB=db
POSTGRES_PORT=5432

API_TOKENS=dev_1:Fiivq4gcWD, dev_2:wQTcVpSLfd
```

2. На данный момент у нас есть один проброшенный айпи, пригодный для использования в проекте. Для того чтобы он работал, нужно в командной строке ввести команду:

```
route add 193.70.127.0 MASK 255.255.255.0 10.20.30.1
```

3. Запустить проект командой

```
docker-compose up -d --build
```

Я не успел добавить ожидание БД в .sh файле и в принципе с ним не справился, поэтому если с первого раза не стартанёт приложение, надо просто запустить докер компост ещё раз.

4. Работа с API

Для каждого запроса к API в headers нужно иметь параметр token со значением токена доступа.

На данный момент доступна документация по ссылке http://localhost:8004/docs

### `/cookie/simply_cookie`

Эндпоинт: `localhost:8004/cookie/simply_cookie` Вот примеры запросов:
Для запроса куков без прокси:

```
{
  "platform": "ostrovok",
  "proxy": {
    "ip": "193.70.127.211",
    "port": "18609"
  },
  "person": {
    "name": "Петька",
    "surname": "Петька"
  }
}
```

С прокси:

```
{
  "platform": "ostrovok",
  "proxy": {
    "ip": "193.70.127.211",
    "port": "18609"
  },
  "person": {
    "name": "Петька",
    "surname": "Петька"
  }
}
```

### `/cookie/universal`
Позволяет получить куки по URL. Примеры:

```
{
  "url": "https://habr.com/ru/companies"
}
```

С прокси:

```
{
  "url": "https://habr.com/ru/companies",
  "proxy": {
    "ip": "193.70.127.211",
    "port": "18609"
  }
}
```

